



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Sclera and its plugins">
      
      
        <link rel="canonical" href="https://www.scleradb.com/docs/sclerasql/sqlextdataaccess/">
      
      
        <meta name="author" content="Sclera, Inc.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../images/icons/favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>External Data Access - Sclera Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700%7CCourier+Prime&display=fallback">
        <style>body,input{font-family:"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Courier Prime","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="manifest" type="application/manifest+json" href="../../../images/icons/site.webmanifest" crossorigin="use-credentials">
    
    
      <link rel="stylesheet" href="../../../css/docs.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-47770601-1", "scleradb.com")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="black" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#accessing-csv-data" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.scleradb.com/docs" title="Sclera Documentation" aria-label="Sclera Documentation" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../../../images/sclera-logo-square.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Sclera Documentation
            </span>
            <span class="md-header-nav__topic">
              
                External Data Access
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.scleradb.com/docs" title="Sclera Documentation" class="md-nav__button md-logo">
      
        <img alt="logo" src="../../../images/sclera-logo-square.png" width="48" height="48">
      
    </a>
    Sclera Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/scleradb" title="Source Code" class="md-nav__link">
      Source Code
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Documentation Contents" class="md-nav__link">
      Documentation Contents
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/whysclera/" title="Why Sclera?" class="md-nav__link">
      Why Sclera?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/technical/" title="Technical Details" class="md-nav__link">
      Technical Details
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/components/" title="Components Reference" class="md-nav__link">
      Components Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/install/" title="Installation Reference" class="md-nav__link">
      Installation Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/dbms/" title="Data Platform Connection Reference" class="md-nav__link">
      Data Platform Connection Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/configuration/" title="Configuration Reference" class="md-nav__link">
      Configuration Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      ScleraSQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        ScleraSQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlexamples/" title="ScleraSQL Examples" class="md-nav__link">
      ScleraSQL Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlintro/" title="ScleraSQL Introduction" class="md-nav__link">
      ScleraSQL Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlregular/" title="Standard SQL" class="md-nav__link">
      Standard SQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlcrosstab/" title="Using Cross-Tabulation" class="md-nav__link">
      Using Cross-Tabulation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlextordered/" title="Processing Ordered Data" class="md-nav__link">
      Processing Ordered Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlseqalign/" title="Sequence Alignment" class="md-nav__link">
      Sequence Alignment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlextarg/" title="Selecting the Optimal" class="md-nav__link">
      Selecting the Optimal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlextml/" title="Using Machine Learning" class="md-nav__link">
      Using Machine Learning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlcleaning/" title="Data Cleaning" class="md-nav__link">
      Data Cleaning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlexttext/" title="Using Text Analytics" class="md-nav__link">
      Using Text Analytics
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        External Data Access
      </label>
    
    <a href="./" title="External Data Access" class="md-nav__link md-nav__link--active">
      External Data Access
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessing-csv-data" class="md-nav__link">
    Accessing CSV Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exporting-query-results-as-csv-files" class="md-nav__link">
    Exporting Query Results as CSV Files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-text-files" class="md-nav__link">
    Accessing Text Files
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../visualization/" title="Visualization" class="md-nav__link">
      Visualization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sqlmisc/" title="Miscellaneous Information" class="md-nav__link">
      Miscellaneous Information
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../interface/shell/" title="Command Line Shell Reference" class="md-nav__link">
      Command Line Shell Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interface/jdbc/" title="Embedded JDBC Reference" class="md-nav__link">
      Embedded JDBC Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Sclera Extensions SDK
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Sclera Extensions SDK
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sdk/sdkintro/" title="Extensions SDK Introduction" class="md-nav__link">
      Extensions SDK Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sdk/sdkextdataaccess/" title="Data Access Plugins" class="md-nav__link">
      Data Access Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sdk/sdkextdbms/" title="Database System Plugins" class="md-nav__link">
      Database System Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sdk/sdkextml/" title="Machine Learning Library Plugins" class="md-nav__link">
      Machine Learning Library Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sdk/sdkexttext/" title="Text Analytics Library Plugins" class="md-nav__link">
      Text Analytics Library Plugins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Acknowledgements
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Acknowledgements
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ack/dependencies/" title="Component Third Party Dependencies" class="md-nav__link">
      Component Third Party Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ack/licenses/" title="Component Licenses" class="md-nav__link">
      Component Licenses
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessing-csv-data" class="md-nav__link">
    Accessing CSV Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exporting-query-results-as-csv-files" class="md-nav__link">
    Exporting Query Results as CSV Files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-text-files" class="md-nav__link">
    Accessing Text Files
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>External Data Access</h1>
                
                <p>In this section, we describe the extensions that enable access to data in <a href="#sclera-csv">CSV (Comma-Separated Value) files</a>, <a href="#sclera-csv">free-form text files</a> and web services within a SQL query. This data can be used just like a relational base table within the SQL query.</p>
<p>These extensions are developed using the <a href="../../sdk/sdkintro/">Sclera Connector Development SDK</a>, the sources for each of these extensions is available on <a href="https://github.com/scleradb">GitHub</a> for reference.</p>
<p><a class="anchor" name="sclera-csv"></a></p>
<h2 id="accessing-csv-data">Accessing CSV Data<a class="headerlink" href="#accessing-csv-data" title="Permanent link">&#9668;</a></h2>
<p>Sclera can dynamically load CSV files and present the data as a table to a SQL query. Recall that a <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV file</a> is a text file, structured into lines such that the first line contains the column names separated by commas, and the remaining lines contain the corresponding values separated by commas.</p>
<p>This feature introduces a new <a href="#table-expression">table expression</a> with the following syntax:</p>
<pre><code>EXTERNAL CSV( path [ , format [ , header_flag [ , path_col ] ] ]  )
[ ORDERED BY ( expression [ ASC | DESC ] [ NULLS { FIRST | LAST } ] [, ...] ) ]
</code></pre>
<ul>
<li><code>path</code> is one of the following:<ul>
<li>a URL that responds with CSV data (e.g. <code>http://download.finance.yahoo.com/d/quotes.csv?s=AAPL&amp;f=sl1d1t1c1ohgv&amp;e=.csv</code>)</li>
<li>the path to a CSV file</li>
<li>the path to a directory containing multiple CSV files; each of these files is expected to have the same format and identical headers (if present).</li>
</ul>
</li>
<li><a class="anchor" name="sclera-csv-format"></a> <code>format</code> is the CSV format, as specified by the <a href="http://commons.apache.org/proper/commons-csv/">Apache Commons CSV library</a>. It can be one of (see the <a href="http://commons.apache.org/proper/commons-csv/archives/1.1/apidocs/org/apache/commons/csv/CSVFormat.html">Apache Commons CSV documentation</a> for details):<ul>
<li><a href="http://commons.apache.org/proper/commons-csv/archives/1.1/apidocs/org/apache/commons/csv/CSVFormat.html#DEFAULT">DEFAULT</a>, which specifies <code>','</code> as the delimiter, <code>'"'</code> as the quote, <code>'\r\n'</code> as the record separator, and ignores empty lines in the input.</li>
<li><a href="http://commons.apache.org/proper/commons-csv/archives/1.1/apidocs/org/apache/commons/csv/CSVFormat.html#RFC4180">RFC4180</a>, which specifies <code>','</code> as the delimiter, <code>'"'</code> as the quote, <code>'\r\n'</code> as the record separator, and does not ignore empty lines in the input.</li>
<li><a href="http://commons.apache.org/proper/commons-csv/archives/1.1/apidocs/org/apache/commons/csv/CSVFormat.html#EXCEL">EXCEL</a>, which is the same as <code>RFC4180</code> except that it allows missing column names.</li>
<li><a href="http://commons.apache.org/proper/commons-csv/archives/1.1/apidocs/org/apache/commons/csv/CSVFormat.html#TDF">TDF</a>, which specifies <code>'\t'</code> (tab) as the delimiter, <code>'"'</code> as the quote, <code>'\r\n'</code> as the record separator, and ignores spaces surrounding the values.</li>
<li><a href="http://commons.apache.org/proper/commons-csv/archives/1.1/apidocs/org/apache/commons/csv/CSVFormat.html#MYSQL">MYSQL</a>, which specifies <code>'\t'</code> (tab) as the delimiter, does not quote the values (but escapes special characters with <code>'\'</code>), specifies <code>'\n'</code> as the record separator, and does not ignore empty lines in the input.</li>
</ul>
</li>
<li><code>header_flag</code> can be <code>HEADER</code> or <code>NOHEADER</code> indicating whether or not a header is present in the input CSV. If not specified, it defaults to <code>HEADER</code></li>
<li><code>path_col</code> the name of an optional output column. If specified, a new column of the specified name is added to each row, and populated with the URL or file name from which that row has been read. This is useful when the <code>path</code> is a directory -- in this case, the specified column will contain the path to the relevant file under that directory.</li>
<li>The <code>ORDERED BY</code> clause <em>declares</em> the sort order of the rows in the CSV file; note that this is an unverified declaration, and Sclera blindly relies on the same while planning further evaluation on the rows read.</li>
</ul>
<p>As an example, consider a CSV file <code>"/path/to/custinfo.csv"</code> containing columns <code>email</code>, <code>location</code> and <code>age</code> for each customer.</p>
<p>You can view the data as a table in Sclera by saying:</p>
<pre><code>&gt; EXTERNAL CSV("/path/to/custinfo.csv");
</code></pre>
<p>This can be used in SQL queries just like a regular base table or view. The following query lists, for each distinct location, the number customers in that location.</p>
<pre><code>&gt; SELECT location, COUNT(*)
  FROM EXTERNAL CSV("/path/to/custinfo.csv")
  GROUP BY location;
</code></pre>
<p>The following query joins this table with a <a href="../../setup/dbms/#connecting-to-mysql">MySQL (connected as location <code>myloc</code>)</a> table <code>defaulters</code>, and computes the number of defaulters in that region:</p>
<pre><code>&gt; SELECT location, COUNT(*)
  FROM EXTERNAL CSV("/path/to/custinfo.csv") JOIN myloc.defaulters USING (email)
  GROUP BY location;
</code></pre>
<p>Note that since the CSV format does not include the type of the columns, each column in the table returned by <code>CSV(_)</code> has type <code>VARCHAR</code>. To enable automatic type inferencing, you can use the <a href="../sqlcleaning/#automatic-type-inference">TYPEINFER operator</a>.</p>
<h3 id="exporting-query-results-as-csv-files">Exporting Query Results as CSV Files<a class="headerlink" href="#exporting-query-results-as-csv-files" title="Permanent link">&#9668;</a></h3>
<p>The <code>EXTERNAL CSV</code> can also be used to export the result of a query into a CSV file, using the following syntax:</p>
<pre><code>CREATE EXTERNAL CSV( file_path [ , format ] ) AS table_expression
</code></pre>
<ul>
<li><code>file_path</code> is the path to the file to be created. If the file exists, it will be overwritten.</li>
<li><code>format</code> is as <a href="#sclera-csv-format">described earlier</a>.</li>
<li><code>table_expression</code> is a <a href="#table-expression">table expression</a>.</li>
</ul>
<p>The syntax is similar to the standard <a href="../sqlregular/#creating-tables-with-empty-results"><code>CREATE TABLE ... AS</code> statement</a>, except the <code>TABLE</code> is replaced by the <code>EXTERNAL CSV(...)</code>.</p>
<p>For example, the following statement creates a CSV file <code>custdefault.csv</code> containing the <code>JOIN</code> of the data in <code>custinfo.csv</code> and the table <code>defaulters</code> in the location <code>myloc</code>:</p>
<pre><code>&gt; CREATE EXTERNAL CSV("/path/to/custdefault.csv") AS
  EXTERNAL CSV("/path/to/custinfo.csv") JOIN myloc.defaulters USING (email);
</code></pre>
<p>Similarly, the following statement creates a CSV file <code>locdefault.csv</code> containing the number of defaulters by location:</p>
<pre><code>&gt; CREATE EXTERNAL CSV("/path/to/locdefault.csv") AS
  SELECT location, COUNT(*) as defaulter_count
  FROM EXTERNAL CSV("/path/to/custinfo.csv") JOIN myloc.defaulters USING (email)
  GROUP BY location;
</code></pre>
<p><a class="anchor" name="sclera-textfiles"></a></p>
<h2 id="accessing-text-files">Accessing Text Files<a class="headerlink" href="#accessing-text-files" title="Permanent link">&#9668;</a></h2>
<p>Sclera can dynamically load raw text data from text files and present the same as a table to a SQL query.</p>
<p>This feature introduces a new <a href="#table-expression">table expression</a> with the following syntax:</p>
<pre><code>EXTERNAL TEXTFILES( filedir_path )
</code></pre>
<p>where <code>filedir_path</code> is the path to file to be loaded, or to a directory containing the files to be loaded.</p>
<p>The resulting virtual table contains a row for each file, with two columns of type <code>VARCHAR</code>. The first column, called <code>file</code> contains the <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/io/File.html#getCanonicalPath()">canonical path</a> of the file, and the second column <code>contents</code> contains the textual contents of the file.</p>
<p>For instance, the following query returns the path and contents of all files under the directory <code>"/tmp/mydir"</code>:</p>
<pre><code>&gt; SELECT file, contents
  FROM TEXTFILES("/tmp/mydir");
</code></pre>
<p>The resulting table can also be aggregated over, joined with other base or virtual tables, and so on, just like a base table or a view.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../sqlexttext/" title="Using Text Analytics" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Using Text Analytics
              </span>
            </div>
          </a>
        
        
          <a href="../visualization/" title="Visualization" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Visualization
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2012 - 2020 Sclera, Inc.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/scleradb" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/scleradb" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/sclera-inc-" target="_blank" rel="noopener" title="linkedin" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
    
  </body>
</html>